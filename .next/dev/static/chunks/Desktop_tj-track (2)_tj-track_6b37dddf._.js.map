{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/lib/api.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080/api/v1.0\"\nconst API_TIMEOUT = parseInt(process.env.NEXT_PUBLIC_API_TIMEOUT || '30000')\n\ninterface RequestConfig extends RequestInit {\n  params?: Record<string, string | number | boolean | undefined>\n}\n\nclass ApiClient {\n  private baseUrl: string\n  private token: string | null = null\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl\n  }\n\n  setToken(token: string | null) {\n    this.token = token\n  }\n\n  private buildUrl(endpoint: string, params?: Record<string, string | number | boolean | undefined>): string {\n    const url = new URL(`${this.baseUrl}${endpoint}`)\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined) {\n          url.searchParams.append(key, String(value))\n        }\n      })\n    }\n    return url.toString()\n  }\n\n  private async request<T>(endpoint: string, config: RequestConfig = {}, retries = 3): Promise<T> {\n    const { params, ...fetchConfig } = config\n    const url = this.buildUrl(endpoint, params)\n\n    const headers: HeadersInit = {\n      \"Content-Type\": \"application/json\",\n      ...config.headers,\n    }\n\n    if (this.token) {\n      ;(headers as Record<string, string>)[\"Authorization\"] = `Bearer ${this.token}`\n    }\n\n    const controller = new AbortController()\n    const timeoutId = setTimeout(() => controller.abort(), API_TIMEOUT)\n\n    try {\n      const response = await fetch(url, {\n        ...fetchConfig,\n        headers,\n        signal: controller.signal,\n      })\n\n      clearTimeout(timeoutId)\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ \n          message: `Erreur HTTP: ${response.status}`,\n          status: response.status \n        }))\n        \n        // Retry on server errors (5xx) or network issues\n        if (response.status >= 500 && retries > 0) {\n          console.warn(`Retrying request to ${endpoint}, attempts left: ${retries - 1}`)\n          await new Promise(resolve => setTimeout(resolve, 1000)) // Wait 1s before retry\n          return this.request<T>(endpoint, config, retries - 1)\n        }\n        \n        throw new Error(error.message || `Erreur HTTP: ${response.status}`)\n      }\n\n      return response.json()\n    } catch (error) {\n      clearTimeout(timeoutId)\n      \n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new Error('Timeout: La requête a pris trop de temps')\n      }\n      \n      // Retry on network errors\n      if (retries > 0 && error instanceof TypeError) {\n        console.warn(`Network error, retrying ${endpoint}, attempts left: ${retries - 1}`)\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        return this.request<T>(endpoint, config, retries - 1)\n      }\n      \n      throw error\n    }\n  }\n\n  async get<T>(endpoint: string, params?: Record<string, string | number | boolean | undefined>): Promise<T> {\n    return this.request<T>(endpoint, { method: \"GET\", params })\n  }\n\n  async post<T>(\n    endpoint: string,\n    data?: unknown,\n    params?: Record<string, string | number | boolean | undefined>,\n  ): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: \"POST\",\n      body: data ? JSON.stringify(data) : undefined,\n      params,\n    })\n  }\n\n  async put<T>(\n    endpoint: string,\n    data?: unknown,\n    params?: Record<string, string | number | boolean | undefined>,\n  ): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: \"PUT\",\n      body: data ? JSON.stringify(data) : undefined,\n      params,\n    })\n  }\n\n  async delete<T>(endpoint: string, params?: Record<string, string | number | boolean | undefined>): Promise<T> {\n    return this.request<T>(endpoint, { method: \"DELETE\", params })\n  }\n}\n\nexport const apiClient = new ApiClient(API_BASE_URL)\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/contexts/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useCallback, useEffect, type ReactNode } from \"react\"\nimport { apiClient } from \"@/lib/api\"\nimport type { ProfileResponse, AuthRequest, ProfileRequest } from \"@/types/api\"\n\ninterface AuthContextType {\n  user: ProfileResponse | null\n  isAuthenticated: boolean\n  isLoading: boolean\n  login: (credentials: AuthRequest) => Promise<void>\n  register: (data: ProfileRequest) => Promise<void>\n  logout: () => void\n  verifyOtp: (email: string, otp: string) => Promise<void>\n  sendResetOtp: (email: string) => Promise<void>\n  resetPassword: (email: string, otp: string, newPassword: string) => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\n\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<ProfileResponse | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const token = localStorage.getItem(\"tj-track-token\")\n    const savedUser = localStorage.getItem(\"tj-track-user\")\n    console.log('Auth init - token:', !!token, 'savedUser:', !!savedUser)\n\n    if (token && savedUser) {\n      try {\n        const parsedUser = JSON.parse(savedUser)\n        apiClient.setToken(token)\n        setUser(parsedUser)\n        document.cookie = `tj-track-token=${token}; path=/; max-age=${7 * 24 * 60 * 60}`\n        console.log('Auth restored:', parsedUser)\n      } catch {\n        localStorage.removeItem(\"tj-track-token\")\n        localStorage.removeItem(\"tj-track-user\")\n        document.cookie = 'tj-track-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT'\n        console.log('Auth restore failed')\n      }\n    }\n    setIsLoading(false)\n  }, [])\n\n  // Debug: Log user state changes\n  useEffect(() => {\n    console.log('Auth state changed - user:', user ? 'logged in' : 'not logged in', 'isAuthenticated:', !!user)\n  }, [user])\n\n  const login = useCallback(async (credentials: AuthRequest) => {\n    setIsLoading(true)\n    console.log(\"Login attempt with:\", credentials.email)\n\n    try {\n      const response = await apiClient.post<{ token: string; email: string; name: string; roles: string[] }>(\"/login\", credentials)\n\n      if (response.token) {\n        const user: ProfileResponse = {\n          userId: response.email,\n          name: response.name,\n          email: response.email,\n          isAccountVerified: true,\n          isApproved: true,\n          roles: response.roles\n        }\n        localStorage.setItem(\"tj-track-token\", response.token)\n        localStorage.setItem(\"tj-track-user\", JSON.stringify(user))\n        document.cookie = `tj-track-token=${response.token}; path=/; max-age=${7 * 24 * 60 * 60}`\n        apiClient.setToken(response.token)\n        setUser(user)\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const register = useCallback(async (data: ProfileRequest) => {\n    setIsLoading(true)\n    console.log(\"Register attempt:\", data.email, data.role)\n\n    try {\n      await apiClient.post(\"/register\", data)\n    } catch (error) {\n      console.error(\"Register error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const verifyOtp = useCallback(async (email: string, otp: string) => {\n    setIsLoading(true)\n    console.log(\"Verify OTP for:\", email)\n\n    try {\n      const response = await apiClient.post<{ token: string; email: string; name: string; roles: string[] }>(\"/login-verify-otp\", { email, otp })\n\n      if (response.token) {\n        const user: ProfileResponse = {\n          userId: response.email,\n          name: response.name,\n          email: response.email,\n          isAccountVerified: true,\n          isApproved: true,\n          roles: response.roles\n        }\n        localStorage.setItem(\"tj-track-token\", response.token)\n        localStorage.setItem(\"tj-track-user\", JSON.stringify(user))\n        document.cookie = `tj-track-token=${response.token}; path=/; max-age=${7 * 24 * 60 * 60}`\n        apiClient.setToken(response.token)\n        setUser(user)\n      }\n    } catch (error) {\n      console.error(\"Verify OTP error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const sendResetOtp = useCallback(async (email: string) => {\n    console.log(\"Send reset OTP to:\", email)\n    await apiClient.post(\"/send-reset-otp\", undefined, { email })\n  }, [])\n\n  const resetPassword = useCallback(async (email: string, otp: string, newPassword: string) => {\n    console.log(\"Reset password for:\", email)\n    await apiClient.post(\"/reset-password\", { email, otp, newPassword })\n  }, [])\n\n  const logout = useCallback(() => {\n    console.log(\"Logout\")\n    localStorage.removeItem(\"tj-track-token\")\n    localStorage.removeItem(\"tj-track-user\")\n    document.cookie = 'tj-track-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT'\n    apiClient.setToken(null)\n    setUser(null)\n    \n    if (typeof window !== 'undefined') {\n      window.location.href = '/'\n    }\n  }, [])\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        login,\n        register,\n        logout,\n        verifyOtp,\n        sendResetOtp,\n        resetPassword,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAkBA,MAAM,4BAAc,IAAA,gOAAa,EAA8B;AAIxD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2NAAQ,EAAyB;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2NAAQ,EAAC;IAE3C,sCAAsC;IACtC,IAAA,4NAAS;kCAAC;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,QAAQ,GAAG,CAAC,sBAAsB,CAAC,CAAC,OAAO,cAAc,CAAC,CAAC;YAE3D,IAAI,SAAS,WAAW;gBACtB,IAAI;oBACF,MAAM,aAAa,KAAK,KAAK,CAAC;oBAC9B,4KAAS,CAAC,QAAQ,CAAC;oBACnB,QAAQ;oBACR,SAAS,MAAM,GAAG,CAAC,eAAe,EAAE,MAAM,kBAAkB,EAAE,IAAI,KAAK,KAAK,IAAI;oBAChF,QAAQ,GAAG,CAAC,kBAAkB;gBAChC,EAAE,OAAM;oBACN,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;oBACxB,SAAS,MAAM,GAAG;oBAClB,QAAQ,GAAG,CAAC;gBACd;YACF;YACA,aAAa;QACf;iCAAG,EAAE;IAEL,gCAAgC;IAChC,IAAA,4NAAS;kCAAC;YACR,QAAQ,GAAG,CAAC,8BAA8B,OAAO,cAAc,iBAAiB,oBAAoB,CAAC,CAAC;QACxG;iCAAG;QAAC;KAAK;IAET,MAAM,QAAQ,IAAA,8NAAW;2CAAC,OAAO;YAC/B,aAAa;YACb,QAAQ,GAAG,CAAC,uBAAuB,YAAY,KAAK;YAEpD,IAAI;gBACF,MAAM,WAAW,MAAM,4KAAS,CAAC,IAAI,CAAkE,UAAU;gBAEjH,IAAI,SAAS,KAAK,EAAE;oBAClB,MAAM,OAAwB;wBAC5B,QAAQ,SAAS,KAAK;wBACtB,MAAM,SAAS,IAAI;wBACnB,OAAO,SAAS,KAAK;wBACrB,mBAAmB;wBACnB,YAAY;wBACZ,OAAO,SAAS,KAAK;oBACvB;oBACA,aAAa,OAAO,CAAC,kBAAkB,SAAS,KAAK;oBACrD,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;oBACrD,SAAS,MAAM,GAAG,CAAC,eAAe,EAAE,SAAS,KAAK,CAAC,kBAAkB,EAAE,IAAI,KAAK,KAAK,IAAI;oBACzF,4KAAS,CAAC,QAAQ,CAAC,SAAS,KAAK;oBACjC,QAAQ;gBACV;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;0CAAG,EAAE;IAEL,MAAM,WAAW,IAAA,8NAAW;8CAAC,OAAO;YAClC,aAAa;YACb,QAAQ,GAAG,CAAC,qBAAqB,KAAK,KAAK,EAAE,KAAK,IAAI;YAEtD,IAAI;gBACF,MAAM,4KAAS,CAAC,IAAI,CAAC,aAAa;YACpC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;6CAAG,EAAE;IAEL,MAAM,YAAY,IAAA,8NAAW;+CAAC,OAAO,OAAe;YAClD,aAAa;YACb,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,IAAI;gBACF,MAAM,WAAW,MAAM,4KAAS,CAAC,IAAI,CAAkE,qBAAqB;oBAAE;oBAAO;gBAAI;gBAEzI,IAAI,SAAS,KAAK,EAAE;oBAClB,MAAM,OAAwB;wBAC5B,QAAQ,SAAS,KAAK;wBACtB,MAAM,SAAS,IAAI;wBACnB,OAAO,SAAS,KAAK;wBACrB,mBAAmB;wBACnB,YAAY;wBACZ,OAAO,SAAS,KAAK;oBACvB;oBACA,aAAa,OAAO,CAAC,kBAAkB,SAAS,KAAK;oBACrD,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;oBACrD,SAAS,MAAM,GAAG,CAAC,eAAe,EAAE,SAAS,KAAK,CAAC,kBAAkB,EAAE,IAAI,KAAK,KAAK,IAAI;oBACzF,4KAAS,CAAC,QAAQ,CAAC,SAAS,KAAK;oBACjC,QAAQ;gBACV;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qBAAqB;gBACnC,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;8CAAG,EAAE;IAEL,MAAM,eAAe,IAAA,8NAAW;kDAAC,OAAO;YACtC,QAAQ,GAAG,CAAC,sBAAsB;YAClC,MAAM,4KAAS,CAAC,IAAI,CAAC,mBAAmB,WAAW;gBAAE;YAAM;QAC7D;iDAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,8NAAW;mDAAC,OAAO,OAAe,KAAa;YACnE,QAAQ,GAAG,CAAC,uBAAuB;YACnC,MAAM,4KAAS,CAAC,IAAI,CAAC,mBAAmB;gBAAE;gBAAO;gBAAK;YAAY;QACpE;kDAAG,EAAE;IAEL,MAAM,SAAS,IAAA,8NAAW;4CAAC;YACzB,QAAQ,GAAG,CAAC;YACZ,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,SAAS,MAAM,GAAG;YAClB,4KAAS,CAAC,QAAQ,CAAC;YACnB,QAAQ;YAER,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF;2CAAG,EAAE;IAEL,qBACE,+OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GAlJgB;KAAA;AAoJT,SAAS;;IACd,MAAM,UAAU,IAAA,6NAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/contexts/cart-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useCallback, useEffect, type ReactNode } from \"react\"\nimport { apiClient } from \"@/lib/api\"\nimport type { PanierDto, PanierItemDto, PanierRequest } from \"@/types/api\"\nimport { useAuth } from \"./auth-context\"\n\ninterface LocalCartItem extends PanierItemDto {\n  articleNom: string\n  articlePhoto?: string\n  prixUnitaire: number\n}\n\ninterface CartContextType {\n  items: LocalCartItem[]\n  isOpen: boolean\n  isLoading: boolean\n  totalItems: number\n  totalAmount: number\n  montantHT: number\n  montantTVA: number\n  addItem: (\n    articleIdOrItem: number | PanierItemDto,\n    quantite?: number,\n    productInfo?: { name: string; price: number; image?: string },\n  ) => Promise<void>\n  updateQuantity: (articleId: number, quantite: number) => Promise<void>\n  removeItem: (articleId: number) => Promise<void>\n  clearCart: () => Promise<void>\n  openCart: () => void\n  closeCart: () => void\n  toggleCart: () => void\n  refreshCart: () => Promise<void>\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined)\n\nconst LOCAL_CART_KEY = \"tj-track-cart\"\n\nexport function CartProvider({ children }: { children: ReactNode }) {\n  const { user, isAuthenticated } = useAuth()\n  const [localItems, setLocalItems] = useState<LocalCartItem[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n\n  const refreshCart = useCallback(async () => {\n    if (!isAuthenticated || !user?.email) {\n      setLocalItems([])\n      return\n    }\n\n    setIsLoading(true)\n    try {\n      const data = await apiClient.get<PanierDto>(\"/panier\", { userEmail: user.email })\n      if (data?.items) {\n        setLocalItems(data.items as LocalCartItem[])\n      } else {\n        setLocalItems([])\n      }\n    } catch (error: any) {\n      // If user not found (400 error), work offline\n      if (error?.message?.includes('400')) {\n        console.warn('User not found in database, working offline')\n        setLocalItems([])\n        return\n      }\n      console.warn('Backend non disponible, utilisation du cache local:', error)\n      try {\n        const cached = localStorage.getItem(LOCAL_CART_KEY)\n        if (cached) {\n          const cachedItems = JSON.parse(cached)\n          setLocalItems(cachedItems)\n        } else {\n          setLocalItems([])\n        }\n      } catch {\n        setLocalItems([])\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }, [isAuthenticated, user?.email])\n\n  useEffect(() => {\n    if (isAuthenticated && user?.email) {\n      refreshCart()\n    } else {\n      setLocalItems([])\n      localStorage.removeItem(LOCAL_CART_KEY)\n    }\n  }, [isAuthenticated, user?.email, refreshCart])\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(LOCAL_CART_KEY, JSON.stringify(localItems))\n    }\n  }, [localItems])\n\n  const items = localItems\n  const totalItems = localItems.reduce((sum, item) => sum + item.quantite, 0)\n  const totalAmount = localItems.reduce((sum, item) => sum + item.sousTotal, 0)\n  const montantHT = totalAmount * 0.8095\n  const montantTVA = totalAmount * 0.1905\n\n  const addItem = useCallback(\n    async (\n      articleIdOrItem: number | PanierItemDto,\n      quantite?: number,\n      productInfo?: { name: string; price: number; image?: string }\n    ) => {\n      if (!isAuthenticated || !user?.email) {\n        throw new Error('Vous devez être connecté pour ajouter au panier')\n      }\n\n      // Handle object parameter (PanierItemDto)\n      if (typeof articleIdOrItem === 'object') {\n        const item = articleIdOrItem\n        if (!item.articleId || !item.quantite || !item.prixUnitaire) {\n          throw new Error('Données article incomplètes')\n        }\n        \n        const previousItems = [...localItems]\n        setLocalItems((prev) => {\n          const existingIndex = prev.findIndex((i) => i.articleId === item.articleId)\n          if (existingIndex >= 0) {\n            const updated = [...prev]\n            const newQuantite = updated[existingIndex].quantite + item.quantite\n            updated[existingIndex] = {\n              ...updated[existingIndex],\n              quantite: newQuantite,\n              sousTotal: newQuantite * item.prixUnitaire,\n            }\n            return updated\n          }\n          return [...prev, { ...item, id: Date.now() } as LocalCartItem]\n        })\n        \n        try {\n          const request: PanierRequest = { articleId: item.articleId, quantite: item.quantite }\n          await apiClient.post(\"/panier/ajouter\", request, { userEmail: user.email })\n        } catch (error: any) {\n          if (error?.message?.includes('400')) {\n            console.warn('User not found, working offline')\n            return // Keep local changes\n          }\n          console.error('Erreur ajout panier:', error)\n          setLocalItems(previousItems)\n          throw error\n        }\n        return\n      }\n\n      // Handle separate parameters\n      const articleId = articleIdOrItem\n      if (!quantite || !productInfo || quantite <= 0) {\n        throw new Error(\"Quantité et informations produit requises\")\n      }\n\n      const previousItems = [...localItems]\n      const newItem = {\n        id: Date.now(),\n        articleId,\n        articleCode: `ART-${articleId}`,\n        articleNom: productInfo.name,\n        articlePhoto: productInfo.image,\n        quantite,\n        prixUnitaire: productInfo.price,\n        sousTotal: quantite * productInfo.price,\n        stockDisponible: 100,\n        disponible: true,\n      }\n\n      setLocalItems((prev) => {\n        const existingIndex = prev.findIndex((i) => i.articleId === articleId)\n        if (existingIndex >= 0) {\n          const updated = [...prev]\n          const newQuantite = updated[existingIndex].quantite + quantite\n          updated[existingIndex] = {\n            ...updated[existingIndex],\n            quantite: newQuantite,\n            sousTotal: newQuantite * productInfo.price,\n          }\n          return updated\n        }\n        return [...prev, newItem]\n      })\n\n      try {\n        const request: PanierRequest = { articleId, quantite }\n        await apiClient.post(\"/panier/ajouter\", request, { userEmail: user.email })\n      } catch (error: any) {\n        if (error?.message?.includes('400')) {\n          console.warn('User not found, working offline')\n          return // Keep local changes\n        }\n        console.error('Erreur ajout panier:', error)\n        setLocalItems(previousItems)\n        throw error\n      }\n    },\n    [isAuthenticated, user?.email, localItems],\n  )\n\n  const removeItem = useCallback(\n    async (articleId: number) => {\n      if (!isAuthenticated || !user?.email) {\n        throw new Error('Vous devez être connecté')\n      }\n\n      const previousItems = [...localItems]\n      setLocalItems((prev) => prev.filter((i) => i.articleId !== articleId))\n\n      try {\n        await apiClient.delete(`/panier/supprimer/${articleId}`, { userEmail: user.email })\n      } catch (error) {\n        console.error('Erreur suppression article:', error)\n        setLocalItems(previousItems)\n        throw error\n      }\n    },\n    [isAuthenticated, user?.email, localItems],\n  )\n\n  const updateQuantity = useCallback(\n    async (articleId: number, quantite: number) => {\n      if (quantite <= 0) {\n        return removeItem(articleId)\n      }\n\n      if (!isAuthenticated || !user?.email) {\n        throw new Error('Vous devez être connecté')\n      }\n\n      const previousItems = [...localItems]\n      setLocalItems((prev) =>\n        prev.map((item) =>\n          item.articleId === articleId ? { ...item, quantite, sousTotal: quantite * item.prixUnitaire } : item,\n        ),\n      )\n\n      try {\n        const request: PanierRequest = { articleId, quantite }\n        await apiClient.put(\"/panier/modifier\", request, { userEmail: user.email })\n      } catch (error) {\n        console.error('Erreur modification quantité:', error)\n        setLocalItems(previousItems)\n        throw error\n      }\n    },\n    [isAuthenticated, user?.email, localItems, removeItem],\n  )\n\n  const clearCart = useCallback(async () => {\n    setLocalItems([])\n    localStorage.removeItem(LOCAL_CART_KEY)\n\n    if (isAuthenticated && user?.email) {\n      try {\n        await apiClient.delete(\"/panier/vider\", { userEmail: user.email })\n      } catch (error) {\n        // API sync failed\n      }\n    }\n  }, [isAuthenticated, user?.email])\n\n  const openCart = useCallback(() => setIsOpen(true), [])\n  const closeCart = useCallback(() => setIsOpen(false), [])\n  const toggleCart = useCallback(() => setIsOpen((prev) => !prev), [])\n\n  return (\n    <CartContext.Provider\n      value={{\n        items,\n        isOpen,\n        isLoading,\n        totalItems,\n        totalAmount,\n        montantHT,\n        montantTVA,\n        addItem,\n        updateQuantity,\n        removeItem,\n        clearCart,\n        openCart,\n        closeCart,\n        toggleCart,\n        refreshCart,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  )\n}\n\nexport function useCart() {\n  const context = useContext(CartContext)\n  if (!context) {\n    throw new Error(\"useCart must be used within a CartProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 675, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,2NAAO,EAAC,IAAA,kMAAI,EAAC;AACtB"}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/ui/toast.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ToastPrimitives from '@radix-ui/react-toast'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { X } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]',\n      className,\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',\n  {\n    variants: {\n      variant: {\n        default: 'border bg-background text-foreground',\n        destructive:\n          'destructive group border-destructive bg-destructive text-destructive-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      'inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive',\n      className,\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      'absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600',\n      className,\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn('text-sm font-semibold', className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn('text-sm opacity-90', className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,gBAAgB,kOAAwB;AAE9C,MAAM,8BAAgB,6NAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+OAAC,kOAAwB;QACvB,KAAK;QACL,WAAW,IAAA,uKAAE,EACX,qIACA;QAED,GAAG,KAAK;;;;;;;AAGb,cAAc,WAAW,GAAG,kOAAwB,CAAC,WAAW;AAEhE,MAAM,gBAAgB,IAAA,4NAAG,EACvB,6lBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,6NAAgB,OAI5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACnC,qBACE,+OAAC,8NAAoB;QACnB,KAAK;QACL,WAAW,IAAA,uKAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;;AACA,MAAM,WAAW,GAAG,8NAAoB,CAAC,WAAW;AAEpD,MAAM,4BAAc,6NAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+OAAC,gOAAsB;QACrB,KAAK;QACL,WAAW,IAAA,uKAAE,EACX,sgBACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,gOAAsB,CAAC,WAAW;AAE5D,MAAM,2BAAa,6NAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+OAAC,+NAAqB;QACpB,KAAK;QACL,WAAW,IAAA,uKAAE,EACX,yVACA;QAEF,eAAY;QACX,GAAG,KAAK;kBAET,cAAA,+OAAC,sPAAC;YAAC,WAAU;;;;;;;;;;;;AAGjB,WAAW,WAAW,GAAG,+NAAqB,CAAC,WAAW;AAE1D,MAAM,2BAAa,6NAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+OAAC,+NAAqB;QACpB,KAAK;QACL,WAAW,IAAA,uKAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG,+NAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,6NAAgB,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+OAAC,qOAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,uKAAE,EAAC,sBAAsB;QACnC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,qOAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1000, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/ui/toaster.tsx"],"sourcesContent":["'use client'\n\nimport { useToast } from '@/hooks/use-toast'\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from '@/components/ui/toast'\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYO,SAAS;;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,sLAAQ;IAE3B,qBACE,+OAAC,gMAAa;;YACX,OAAO,GAAG,CAAC,SAAU,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,OAAO;gBAChE,qBACE,+OAAC,wLAAK;oBAAW,GAAG,KAAK;;sCACvB,+OAAC;4BAAI,WAAU;;gCACZ,uBAAS,+OAAC,6LAAU;8CAAE;;;;;;gCACtB,6BACC,+OAAC,mMAAgB;8CAAE;;;;;;;;;;;;wBAGtB;sCACD,+OAAC,6LAAU;;;;;;mBARD;;;;;YAWhB;0BACA,+OAAC,gMAAa;;;;;;;;;;;AAGpB;GAtBgB;;QACK,sLAAQ;;;KADb"}},
    {"offset": {"line": 1084, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst alertVariants = cva(\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive:\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,4NAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,+OAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,uKAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+OAAC;QACC,aAAU;QACV,WAAW,IAAA,uKAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,+OAAC;QACC,aAAU;QACV,WAAW,IAAA,uKAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 1160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,4NAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,6NAAI,GAAG;IAE9B,qBACE,+OAAC;QACC,aAAU;QACV,WAAW,IAAA,uKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 1225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/api-error-boundary.tsx"],"sourcesContent":["\"use client\"\n\nimport { Component, ReactNode } from \"react\"\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\nimport { Button } from \"@/components/ui/button\"\nimport { AlertTriangle, RefreshCw } from \"lucide-react\"\n\ninterface Props {\n  children: ReactNode\n  fallback?: ReactNode\n}\n\ninterface State {\n  hasError: boolean\n  error?: Error\n}\n\nexport class ApiErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error }\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    console.error('API Error Boundary caught an error:', error, errorInfo)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback\n      }\n\n      return (\n        <Alert variant=\"destructive\" className=\"m-4\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertTitle>Erreur de connexion API</AlertTitle>\n          <AlertDescription className=\"mt-2\">\n            <p className=\"mb-3\">\n              Une erreur s'est produite lors de la communication avec le serveur.\n            </p>\n            <p className=\"text-sm text-muted-foreground mb-3\">\n              {this.state.error?.message || \"Erreur inconnue\"}\n            </p>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                this.setState({ hasError: false, error: undefined })\n                window.location.reload()\n              }}\n              className=\"flex items-center gap-2\"\n            >\n              <RefreshCw className=\"h-4 w-4\" />\n              Réessayer\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )\n    }\n\n    return this.props.children\n  }\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AALA;;;;;;AAiBO,MAAM,yBAAyB,4NAAS;IAC7C,YAAY,KAAY,CAAE;QACxB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;QAAM;IACjC;IAEA,OAAO,yBAAyB,KAAY,EAAS;QACnD,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,kBAAkB,KAAY,EAAE,SAAc,EAAE;QAC9C,QAAQ,KAAK,CAAC,uCAAuC,OAAO;IAC9D;IAEA,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACvB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;YAC5B;YAEA,qBACE,+OAAC,wLAAK;gBAAC,SAAQ;gBAAc,WAAU;;kCACrC,+OAAC,8RAAa;wBAAC,WAAU;;;;;;kCACzB,+OAAC,6LAAU;kCAAC;;;;;;kCACZ,+OAAC,mMAAgB;wBAAC,WAAU;;0CAC1B,+OAAC;gCAAE,WAAU;0CAAO;;;;;;0CAGpB,+OAAC;gCAAE,WAAU;0CACV,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,WAAW;;;;;;0CAEhC,+OAAC,0LAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;oCACP,IAAI,CAAC,QAAQ,CAAC;wCAAE,UAAU;wCAAO,OAAO;oCAAU;oCAClD,OAAO,QAAQ,CAAC,MAAM;gCACxB;gCACA,WAAU;;kDAEV,+OAAC,kRAAS;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;QAM3C;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC5B;AACF"}},
    {"offset": {"line": 1348, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/lib/query-client.ts"],"sourcesContent":["import { QueryClient } from \"@tanstack/react-query\"\nimport { toast } from \"sonner\"\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: (failureCount, error) => {\n        // Don't retry on 4xx errors (client errors)\n        if (error instanceof Error && error.message.includes('HTTP: 4')) {\n          return false\n        }\n        // Retry up to 3 times for other errors\n        return failureCount < 3\n      },\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: true,\n    },\n    mutations: {\n      retry: (failureCount, error) => {\n        // Don't retry mutations on client errors\n        if (error instanceof Error && error.message.includes('HTTP: 4')) {\n          return false\n        }\n        return failureCount < 2\n      },\n      onError: (error) => {\n        console.error('Mutation error:', error)\n        toast.error(\n          error instanceof Error \n            ? error.message \n            : \"Une erreur s'est produite lors de l'opération\"\n        )\n      },\n    },\n  },\n})\n\n// Global error handler for queries\nqueryClient.setMutationDefaults(['*'], {\n  onError: (error) => {\n    console.error('Query error:', error)\n    if (error instanceof Error && !error.message.includes('HTTP: 4')) {\n      toast.error(\"Erreur de connexion au serveur\")\n    }\n  },\n})"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,cAAc,IAAI,iPAAW,CAAC;IACzC,gBAAgB;QACd,SAAS;YACP,OAAO,CAAC,cAAc;gBACpB,4CAA4C;gBAC5C,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;oBAC/D,OAAO;gBACT;gBACA,uCAAuC;gBACvC,OAAO,eAAe;YACxB;YACA,YAAY,CAAC,eAAiB,KAAK,GAAG,CAAC,OAAO,KAAK,cAAc;YACjE,WAAW,IAAI,KAAK;YACpB,QAAQ,KAAK,KAAK;YAClB,sBAAsB;YACtB,oBAAoB;QACtB;QACA,WAAW;YACT,OAAO,CAAC,cAAc;gBACpB,yCAAyC;gBACzC,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;oBAC/D,OAAO;gBACT;gBACA,OAAO,eAAe;YACxB;YACA,SAAS,CAAC;gBACR,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,sMAAK,CAAC,KAAK,CACT,iBAAiB,QACb,MAAM,OAAO,GACb;YAER;QACF;IACF;AACF;AAEA,mCAAmC;AACnC,YAAY,mBAAmB,CAAC;IAAC;CAAI,EAAE;IACrC,SAAS,CAAC;QACR,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,IAAI,iBAAiB,SAAS,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;YAChE,sMAAK,CAAC,KAAK,CAAC;QACd;IACF;AACF"}},
    {"offset": {"line": 1406, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/EUROPEOLINE/Desktop/tj-track%20%282%29/tj-track/components/providers.tsx"],"sourcesContent":["\"use client\"\n\nimport { QueryClientProvider } from \"@tanstack/react-query\"\nimport { ReactQueryDevtools } from \"@tanstack/react-query-devtools\"\nimport { type ReactNode } from \"react\"\nimport { AuthProvider } from \"@/contexts/auth-context\"\nimport { CartProvider } from \"@/contexts/cart-context\"\nimport { Toaster } from \"@/components/ui/toaster\"\nimport { Toaster as SonnerToaster } from \"sonner\"\nimport { ApiErrorBoundary } from \"@/components/api-error-boundary\"\nimport { DebugWrapper } from \"@/components/debug-wrapper\"\nimport { queryClient } from \"@/lib/query-client\"\n\nexport function Providers({ children }: { children: ReactNode }) {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ApiErrorBoundary>\n        <AuthProvider>\n          <CartProvider>\n            {children}\n            <Toaster />\n            <SonnerToaster position=\"top-right\" richColors />\n          </CartProvider>\n        </AuthProvider>\n      </ApiErrorBoundary>\n      {process.env.NODE_ENV === 'development' && <ReactQueryDevtools />}\n    </QueryClientProvider>\n  )\n}\n"],"names":[],"mappings":";;;;AAyBO;;AAvBP;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAXA;;;;;;;;;;AAaO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC7D,qBACE,+OAAC,kQAAmB;QAAC,QAAQ,0LAAW;;0BACtC,+OAAC,gNAAgB;0BACf,cAAA,+OAAC,iMAAY;8BACX,cAAA,+OAAC,iMAAY;;4BACV;0CACD,+OAAC,4LAAO;;;;;0CACR,+OAAC,wMAAa;gCAAC,UAAS;gCAAY,UAAU;;;;;;;;;;;;;;;;;;;;;;YAInD,oDAAyB,+BAAiB,+OAAC,+PAAkB;;;;;;;;;;;AAGpE;KAfgB"}}]
}